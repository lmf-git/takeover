<style>
  /* Inline styles work alongside CSS modules */
  :host {
    display: block;
    color: var(--text-color);
  }
  .counter-value {
    font-size: 1.2em;
    font-weight: bold;
    color: var(--success-color);
  }
  .local-demo {
    display: flex;
    align-items: center;
    gap: 15px;
    margin: 10px 0;
  }
  input[type="text"] {
    padding: 8px 12px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    font-size: 1em;
    width: 250px;
    background: var(--bg-color);
    color: var(--text-color);
  }
</style>

<div class="{{$css.hero}}">
  <h1>{{title}}</h1>
  <p>Welcome to the home page of our web component application!</p>
</div>

<div class="{{$css.card}}">
  <h2>Local State Demo</h2>
  <p>This state is local to this component only:</p>
  <div class="local-demo">
    <button class="{{$css.button}} {{$css.buttonPrimary}}" @click="decrement">-</button>
    <span class="counter-value">{{localCount}}</span>
    <button class="{{$css.button}} {{$css.buttonPrimary}}" @click="increment">+</button>
  </div>
  <p>
    <input type="text" id="message-input" placeholder="Type something..." @input="updateMessage" value="{{message}}">
  </p>
  <p>You typed: <strong>{{message}}</strong></p>
</div>

<div class="{{$css.card}}">
  <h2>Global State Demo</h2>
  <p>This counter is shared across all components:</p>
  <app-counter></app-counter>
  <p>Current counter value: <span class="counter-value">{{counter}}</span></p>
</div>

<div class="{{$css.card}}">
  <h2>Auth Context Demo</h2>
  <div id="auth-status">
    {{#if isAuthenticated}}
      <p>Logged in as: <strong>{{user.username}}</strong></p>
      <p>Email: {{user.email}} | Role: {{user.role}}</p>
      <img class="{{$css.avatar}}" src="{{user.avatar}}" alt="Avatar">
      <br>
      <button class="{{$css.button}} {{$css.buttonDanger}}" @click="store.logout()">Logout</button>
    {{else}}
      <p>Not logged in</p>
      <button class="{{$css.button}} {{$css.buttonPrimary}}" @click="store.login()">Quick Login</button>
      <button class="{{$css.button}} {{$css.buttonInfo}}" @click="loginAsAdmin">Login as Admin</button>
    {{/if}}
  </div>
  <p><small>Authentication state persists across page refreshes!</small></p>
</div>

<div class="{{$css.nav}}">
  <p>You are currently on the path: {{path}}</p>
  <p>Navigate to: <a href="/about" route>About Page</a> | <a href="/contact" route>Contact Page</a></p>
</div>

<p class="{{$css.timestamp}}">Page rendered at: {{timestamp}}</p>

<script>
import { Component, store, define } from '/core/component.js';

export default class HomePage extends Component {
  static templateUrl = '/app/Home/Home.html';
  static cssModule = '/app/Home/Home.module.css';
  static store = ['counter', 'theme', 'user', 'isAuthenticated'];
  static metadata = { title: 'Home - Web Components App', description: 'Welcome to our web components application.' };
  static ssrProps = { title: 'Welcome Home', localCount: 0, message: '' };
  static local = { localCount: 0, message: '' };

  get props() {
    return { ...super.props, title: 'Welcome Home', timestamp: new Date().toLocaleString() };
  }

  increment() { this.local.localCount++; }
  decrement() { this.local.localCount--; }
  updateMessage(e) { this.local.message = e.target.value; }
  loginAsAdmin() { store.login({ username: 'admin', email: 'admin@test.com' }); }
}

define('home-page', HomePage);
</script>
